<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>ettercap</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><br /><strong><span style="color:#e01b24;">ettercap</span></strong><br /><br /><strong>NOT</strong>: Günümüzde https downgrade çok işe yaramayan bir yöntem.  <br />  <br />öncelikle conf dosyasını açalım bazı ayarları değiştireceğiz;<br /><br /><img src="images/105-1.png" alt="images/105-1.png" /><br /><br />bu iki değeri 0(sıfır) yap<br /><br /><img src="images/105-2.png" alt="images/105-2.png" /><br /><br />ardından<br /><br /><img src="images/105-3.png" alt="images/105-3.png" /><br /><br />linux kısmında olan bu iki satırı ise yorum satırı olmaktan çıkart<br /><br />şimdi ettercap çalıştıralım;<br /><br /><img src="images/105-4.png" alt="images/105-4.png" /> &quot;<span style="color:#57e389;">ettercap -Tq ///</span>&quot;  komutu ile sessiz modda çalıştırıyoruz. <br /><br /><img src="images/105-5.png" alt="images/105-5.png" /><br /><br />bu şekilde çalışmaya başlıyor.<br /><br />Çalışırken “L” basarsak bize host list verir (<a href="CyberSecurity--Recon--netdiscover.html">netdiscover</a> taraması sonucu gibi);<br /><br /><img src="images/105-6.png" alt="images/105-6.png" /><br /><br />şimdi ettercap&#39;i daha spesifik bir komut ile çalıştıralım<br /><br /><img src="images/105-7.png" alt="images/105-7.png" /><br /><br /><span style="color:#57e389;">-Tq</span> sessiz mod<br /><br /><span style="color:#57e389;">-M</span> mode → <span style="color:#57e389;">arp:remote</span> seçtik<br /><br /><span style="color:#57e389;">-i</span> interface<br /><br />üstte ki resimde de gördüğümüz gibi <span style="color:#57e389;">gateway</span> ve <span style="color:#57e389;">hedef ip</span>  <strong>///</strong> aralarına yazıyoruz şu şekilde;<br /><br /> “<strong>/</strong><span style="color:#57e389;">gateway</span><strong>//</strong>” ve “<strong>/</strong><span style="color:#57e389;">hedef ip</span><strong>//” </strong> (çift tırnaklar olmadan) <br /> <br /> burada ki “<strong>///</strong>” manası aslında aralarında şunlar yazılabilir demek;<br /><br /><span style="color:#57e389;">mac_address</span><strong>/</strong><span style="color:#57e389;">ipv4</span><strong>/</strong><span style="color:#57e389;">ipv6</span><strong>/</strong><span style="color:#57e389;">port</span><br /><br />veya “<strong>///</strong>” şeklinde boşta bırakılabilir duruma göre ilgili yerlere bizim üstte ki resime olduğu gibi ip adresleri de verilebilir.<br /><br /><strong>NOT:</strong> komutu verirken 2 tane <strong>///</strong> olduğuna dikkat edelim, <strong>birincisi</strong> <span style="color:#57e389;">gateway</span>, <strong>ikincisi</strong> ise <span style="color:#ed333b;">target</span> için<br /><br />Ve komutu çalıştırıyoruz;<br /><br /><img src="images/105-8.png" alt="images/105-8.png" /><br /><br />çalışır hali bu. Şu anda hedef ip dinleniyor (listening/sniffing)<br /><br /><img src="images/105-9.png" alt="images/105-9.png" /><br /><br />hedef cihazda bir http siteye girip login request gönderdim, linux&#39;e geri dönüyorum ettercap&#39;e bakmak için;<br /><br /><img src="images/105-10.png" alt="images/105-10.png" /><br /><br /> ve görüldüğü gibi kullanıcı adı ve pass direk yakalayıp bize gösterdi. Buda demek oluyor ki wireshark gibi bütün paketleri değilde username, pass gibi bilgileri bize gösteren bir framework ettercap.<br /><br /> <strong><span style="color:#62a0ea;">NOT:</span></strong> Eğer belli aralıkta olan ip adreslerine saldıracaksak;<br /> <br /> ettercap -Tq -M arp:remote -i eth0 /10.0.2.1// /10.0.2.<span style="color:#57e389;">11-20</span>//  → sonuna dikkat et, <span style="color:#57e389;">11-20</span> arasında ki ip adreslerini hedefledik.<br /> <br /> saldıracağımız iki ip adresi varsa virgül ile ayırıp <strong><span style="color:#57e389;">ikinci</span></strong> ip adresini ekleyebiliriz;<br /> <br /> ettercap -Tq -M arp:remote -i eth0 /10.0.2.1// /10.0.2.11<span style="color:#57e389;">, </span><strong><span style="color:#57e389;">10.0.2.12</span></strong>//<br /> <br /> <strong>NOT-2:</strong> Eğer iptables komutu ile port yönlendirmesi yapıp ardından sslstrip çalıştırdıysak o zaman <a href="CyberSecurity--Attacks--https_downgrade.html">https downgrade</a> yapacağımıza göre “<strong><span style="color:#57e389;">-S</span></strong>” komutu ile ettercap çalıştırmalıyız ki ettercap&#39;e bu &quot;<strong><span style="color:#57e389;">-S</span></strong>&quot; komutu ile aslında kendisinin bir ssl sertifikası kullanmamasını çünkü, biz sslstrip sayesinde zaten bir ssl sertifikası oluşturduğumuzu belirtmiş oluyoruz.<br /> <br /> Yani kısacası; <strong><span style="color:#57e389;">-S</span></strong> komutunu eklemeliyiz ki ettercap kendisi bir ssl sertifikası üretmeye kalkmasın çünkü biz zaten bunu <a href="CyberSecurity--Attacks--https_downgrade.html#sslstrip">sslstrip</a> ile yaptık.<br /> <br /> <strong><span style="color:#ed333b;">ettercap</span></strong> çalışırken “p” basarsak bize içinde bulunan plugin&#39;lerin listesini verir<br /> <br /> <img src="images/105-11.png" alt="images/105-11.png" /><br /> <br /> buradan istediğimiz plugin adını yazıp çalıştırabiliriz. Bu yönüylede <strong><span style="color:#ed333b;">ettercap</span></strong> çok kullanışlı bir araçtır.<br /> <br /> <strong><span style="color:#ed333b;">ettercap ile dns spoof</span></strong><br /> <br /> öncelikle <strong><span style="color:#ed333b;">ettercap</span></strong>&#39;in dns dosyasına geliyoruz;<br /> <br /> <img src="images/105-12.png" alt="images/105-12.png" /><br /> <br /> <img src="images/105-13.png" alt="images/105-13.png" /><br /> <br /> bu şekilde yönlendirmek istediğimiz adres ve kendi ip adresimizi veriyoruz.<br /> <br /> Ardından apache server açıyoruz ki verdiğimiz adrese yönelsin (10.0.2.15 vermiştik)<br /> <br /> apache çalıştırıyoruz;<br /> <br /> <img src="images/105-14.png" alt="images/105-14.png" /><br /> <br /> sonra <strong><span style="color:#ed333b;">ettercap</span></strong> çalıştırıyoruz;<br /> <br /> ettercap -Tq -M arp:remote <strong><span style="color:#57e389;">-P dns_spoof</span></strong> -i eth0 /10.0.2.1// /10.0.2.11//<br /> <br /> bu şekilde çalıştırırken direk &quot;<strong><span style="color:#57e389;">-P dns_spoof</span></strong>&quot; olarak istediğimiz bir plugin çalıştırabiliriz veya normal başlatıp “p” basıp seçebiliriz<br /> <br /> <img src="images/105-15.png" alt="images/105-15.png" /><br /> <br /> <strong><span style="color:#ed333b;">dns_spoof</span></strong> ile çalışarak sniffing başladı. Eğer bir hata yok ise hedef şu anda “unicornitem.com” a girmeye çalışınca bizim apache server&#39;ımıza yönlendirilecektir. <br /> <br /> <strong><span style="color:#ed333b;">arp koruması varsa</span></strong> <strong><span style="color:#ed333b;">- tek yönlü arp</span></strong><br /> <br />  eğer modemde arp koruması varsa o zaman aynı mac adresine sahip ikinci cihazın bağlanmasına modem izin vermez. Bu durumda tek yönlü arp saldırısı yapılır. Tek yönlü saldırı şu demektir; biz hedef cihaza gidip “ben modemim” diye kendimizi tanıtıyoruz fakat man in the middle atak da olduğu gibi gidip bir de modeme ben “hedef cihazım” demiyoruz ki modem durumu anlamasın. Bu şekilde tek yönlü atak yaparak başarılı oluruz. <br />  <br />  Bunun ettercap kodu ise şöyle;<br />  <br />  ettercap -Tq -M arp:<strong><span style="color:#57e389;">oneway</span></strong> -i eth0 /10.0.2.<span style="color:#57e389;">11</span>// /10.0.2.<span style="color:#57e389;">1</span>// → buraya dikkat çünkü normal saldırıya göre <span style="color:#57e389;">modem ip</span> ile <span style="color:#57e389;">hedef ip</span> ters yazdık.<br />  <br />  bu şekilde yaptığımızda bazen ettercap paket yakalamıyor tek yönlü olduğu için, bu durumda wireshar ile dinleyebiliriz paketleri.<br /> <br /> Daha fazlası için “ettercap -h”<br /> <br /> <br /><br /> <br /> <br /><br /><br /><br /></div>
</body>
</html>

<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Modem Oluşturma</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><strong><span style="color:#ed333b;"><br />USB Wifi Network Adaptör ile Modem Oluşturma<br /><br /></span></strong><img src="images/100-1.png" alt="images/100-1.png" /><br /><br />  <span style="color:#000000;">İçinde “form” tag&#39;ı bulunan bi siteyi klonlayıp “apache2” sunucumuzun içine koyuyoruz. “form” tag&#39;i olmazsa username ve password alamayız.</span> Örnek olarak;<br />  <br />  <img src="images/100-2.png" alt="images/100-2.png" /> <br />  <br />  <img src="images/100-3.png" alt="images/100-3.png" /> <br />  <br />  burada ki form action kısmının gittiği yeri kendi index.html adresimizle değiştirmeliyiz ki form sayesinde girilen pass ve username bilgilerini görebilelim.<br />  <br />  Wifi network adaptör ile modem gibi görünen bir yayın verebilmemiz için ilk resimde de çözüm olarak göstediğimiz gibi “hostapd” ve bu yayında bize bağlanacak cihazlara DHCP kullanarak ip atamak ve de dns çözümlemesi işlemleri için ise “dnsmasq” kullanacağız. Bu ikisini de linux cihazımıza indiriyoruz.<br />  <br /><strong><span style="color:#ed333b;">  dnsmasq.conf dosyası oluşturma;</span></strong><br />  <br />  <img src="images/100-4.png" alt="images/100-4.png" /><br />  <br />  bu şekilde kendimiz bir configure dosyası oluşturup gerekli ayarları verdik.<br />  <br />  conf dosyasında bir hata yapıp yapmadığımızı ve de dosyamızı çalıştırmak için şu komutu girmeliyiz;<br />  <br />  <img src="images/100-5.png" alt="images/100-5.png" /><br />  <br />  bi hata almadık demek ki conf dosyamızda bir sorun yok.<br />  <br />  Şimdi de hostapd.conf dosyasını oluşturalım.<br />  <br />  <strong><span style="color:#ed333b;">hostapd.conf dosyası oluşturma;</span></strong><br />  <br />  <img src="images/100-6.png" alt="images/100-6.png" /><br />  <br />  bu şekilde kendimiz bir configure dosyası oluşturup gerekli ayarları verdik.<br />  <br />  Şimdi artık wi-fi ağımızı yayınlamak için şu komutu vermeliyiz;<br />  <br />  <img src="images/100-7.png" alt="images/100-7.png" /><br />  <br />  &quot;wlan0: AP-ENABLED&quot; yazısını gördüysek ağımız yayınlanmış demektir, configure dosyasında belirttiğimiz “ssid” ismi ne ise o şekilde wi-fi olarak ağımız yayınlandı.<br />  <br />  Tüm bunların ardından yayınlanan ağımıza bağlanmadan önce birde netmask ataması yapalım;<br />  <br />  <img src="images/100-8.png" alt="images/100-8.png" /> netmask atamasını da <span style="color:#ed333b;">dnsmasq.conf</span> dosyasında ağımızı oluşturmak için modeme verdiğimiz ip adresini girerek resimde görüldüğü şekilde veriyoruz.<br />  <br />  ve apache server&#39;ı başlatmayı unutmuyoruz;<br />  <br />  <img src="images/100-9.png" alt="images/100-9.png" /><br />  <br />  Şimdi ağımız hazır fakat ağımıza bağlanan cihazlara browser üzerinden otomatik bir site açıp oraya yönlendirmemiz lazım. Bunun için oluşturduğumuz <a href="CyberSecurity--Network--captive_portal.html">Captive Portal</a>&#39;da sistem normalde ilk internete bağlandığımızda bir request yollanır eğer bu istek normal olarak dönerse internet var, eğer dönmezse bu bir <a href="CyberSecurity--Network--captive_portal.html">Captive Portal</a> olabilir diye düşünüyor. İşte bu request (istekler) lerin doğru düzgün bir şekilde işlenmesi için www yönlendirmesini kaldırmamız ve yeni bir yönlendirme yazmamız lazım ki kullanıcı ağa bağlandığı anda bizim istediğimiz login page&#39;e (<a href="CyberSecurity--Network--captive_portal.html">Captive Portal</a>) yönlensin.<br />  <br /><strong><span style="color:#ed333b;">  www yönlendirmesi</span></strong><br />  <br />  <img src="images/100-10.png" alt="images/100-10.png" /><br />  <br />  bu şekilde bir arama yapıp araştırmaya başlıyoruz.<br />  <br />  <img src="images/100-11.png" alt="images/100-11.png" /><br />  <br />  bu <a href="https://www.bluehost.com/help/article/url-redirect-rewrite-using-the-htaccess-file">sitede</a> anlatıyor nasıl yapılacağı;<br />  <br />  <img src="images/100-12.png" alt="images/100-12.png" /><br />  <br />  iphone gibi cihazlarda eğer sorun çıkıyorsa ek olarak aşağıda ki komutlar eklenir;<br />  <br />  <img src="images/100-13.png" alt="images/100-13.png" /><br />  <br />  Sonuç olarak bu www sorunundan kurtulmak için şu şekilde komutlar gerekiyor;<br />  <br />  <img src="images/100-14.png" alt="images/100-14.png" /><br />  <br />  Şimdi gelelim bu komutları nereye ekleyeceğimize. <br />  <br />  Düzenlenecek dosya ve dosyanın yeri;<br />  <br />  <img src="images/100-15.png" alt="images/100-15.png" /><br />  <br />  <img src="images/100-16.png" alt="images/100-16.png" /><br />  <br />  bu şekilde <span style="color:#ed333b;">Directory</span> tag&#39;i oluşturup arasına kodlarımızı yazıyoruz. <br />  <br />  Bir hata alırsak da hatayı şu şekilde yönlendirebiliriz;<br />  <br />  <img src="images/100-17.png" alt="images/100-17.png" /><br />  <br />  altı çizili komut ile hatayı <span style="color:#ed333b;">root</span>&#39; a (<span style="color:#ed333b;">/</span>) yönlendirdik.<br />  <br />  Bu conf dosyasında yapmış olduğumuz değişikliklerin geçerli olması için;<br />  <br />  <img src="images/100-18.png" alt="images/100-18.png" /><br />  <br />  bu komutu yazıp çalıştırıyoruz.<br />  <br />  Mesela hedef modemin ismi “<span style="color:#ed333b;">hedef modem</span>” olsun. Bizde buna alternatif olarak “<span style="color:#ed333b;">hedef modem</span> <span style="color:#57e389;">v2</span>” gibi yeni bir isim ile bu ağı oluşturup, ardından kullanıcılara <a href="CyberSecurity--Attacks--Deauthentication_Attack.html">Deauthentication Attack</a> yaparız. Kullanıcı internete giremeyince wi-fi ağlarında  “<span style="color:#ed333b;">hedef modem</span> <span style="color:#57e389;">v2</span>” görüp ona bağlanır. Bizde kullanıcıyı oluşturduğumuz bu login sayfasına yönlendirip şifresini alabiliriz. Bu işlemin mantığı bu şekilde çalışıyor.<br />  <br /> <strong><span style="color:#ed333b;"> Bağlanan kullanıcıların şifrelerini görme</span></strong><br />  <br />  Wireshark açıp wlan0 seçiyoruz;<br />  <br />  <img src="images/100-19.png" alt="images/100-19.png" /><br />  <br />  ardından start capturing packets seçeneği ile dinlemeyi başlatıyoruz;<br />  <br />  <img src="images/100-20.png" alt="images/100-20.png" /><br />  <br />  http olarak paketleri filtreliyoruz;<br />  <br />  <img src="images/100-21.png" alt="images/100-21.png" /><br />  <br />  şimdi bize POST metod arayıp buluyoruz. Bulduğumuz bir post metoduna çift tıklayıp açılan pencerede username, password bulup bilgileri elde etmiş oluyoruz;<br />  <br />  <img src="images/100-22.png" alt="images/100-22.png" /><br />  <br /><strong><span style="color:#ed333b;">  Önemli Not:</span></strong><br />  <br />  Eğer bu adımları yapmamıza rağmen olmadıysa,<br />  <br /><span style="color:#57e389;">  DNS değiştir</span><br />  <br /><span style="color:#57e389;">  linux reset at</span><br />  <br />  ardından aşağıda ki <span style="color:#57e389;">komutları</span> sırasıyla gir;<br />  <br /><span style="color:#57e389;">  service NetworkManager stop   </span><span style="color:#090a0b;">→ bu esnada internet bağlantın kesilecek ama sorun değil diğer komutları yazmaya devam et.</span><span style="color:#57e389;"><br />  <br />  ifconfig wlan0 10.0.0.1 netmask 255.255.255.0<br />  <br />  a2enmod rewrite<br />  <br />  dnsmasq -C /root/Documents/Hotspot/dnsmasq.conf<br />  <br />  hostapd /root/Documents/Hotspot/hostapd.conf -B<br />  <br />  service apache2 start</span><br /><br />  bunun dışında <strong><span style="color:#ed333b;">dnsmasq.conf </span></strong><span style="color:#090a0b;">ve</span><strong><span style="color:#ed333b;"> hostapd.conf</span></strong> dosyalarını kontrol et, channel değiştirmeyi deneyebilirsin, modem için verdiğin ip adresini kontrol et ve dosyaları kaydettikten sonra linux reset atıp yukarıda ki önemli not kısmında verilen komutları yeniden gir.<br />  <br />  <img src="images/100-23.png" alt="images/100-23.png" /><br />  <br />  <img src="images/100-24.png" alt="images/100-24.png" /><br />  <br />  <br />  <br />  <br />  <br />  <br />  <br />  <br />  <br />  <br />  <strong><span style="color:#ed333b;"><br /><br /><br /></span></strong></div>
</body>
</html>

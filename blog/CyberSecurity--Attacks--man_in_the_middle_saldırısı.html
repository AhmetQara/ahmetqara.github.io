<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>man in the middle saldırısı</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><img src="images/23-1.png" alt="images/23-1.png" /><br /><br /><img src="images/23-2.png" alt="images/23-2.png" /><br /><br /><br />  yukardaki şekilde ki “ROUTER&quot; ya da modeme bir response gönderebiliyoruz. Bu response içeriği olarak kendi mac adresimizi verirken ip olarak “TARGET” ip verebiliriz. Böylelikle bu ip de bu mac adresi var diyerek modemi yanlış yönlendirebiliriz. Ardından “TARGET” a gidip yine kendi adresimizi ve ip olarak ise modemin ip&#39;sini vererek kendimizi modem gibi tanıtabiliriz.<br />  <br />   Tüm bu yaptıklarımızdan sonra aşağıda da görüldüğü gibi modem(router) bizi TARGET, TARGET ise bizi modem sanacaktır. Bizde ortada ki cihaz olarak kalacağımız için bu yönteme “Man in the Middle” adı verilmiştir.<br />   <br /><br /><img src="images/23-3.png" alt="images/23-3.png" /> <br /><img src="images/23-4.png" alt="images/23-4.png" /><br /><br />  TARGET cihaz internete çıkarken tüm istekleri bizim üzerimizden geçirecek bizde bu istekleri modeme ileteceğiz ve böylece modemden gelen cevaplarıda görebileceğiz ve hedef(TARGET) cihaza iletebiliriz. Böylelikle tüm internet paketlerini okuyup hedefin hangi sitelerde gezdiğini, şifrelerini, kullanıcı adı bilgilerini vs her şeyini görebiliriz. Bütün bu man of the middle saldırısının yapılması için hedef ile aynı ağda olmak gerekir. <br />  <br /><br />  Mitm(man in the middle) saldırısında başlamadan <strong>önce ip forward</strong> işlemi yapmalıyız ki hedefin internet bağlantısı kesilmesin. Bu işlemi her boot dan sonra yapmalıyız.<br /><br /> ip forward için terminal&#39;e şu komutu girmeliyiz;<br /><br /><span style="color:#ed333b;"> </span><strong><span style="color:#ed333b;">echo &gt; 1 /proc/sys/net/ipv4/ip_forward</span></strong><br /><br /><img src="images/23-5.png" alt="images/23-5.png" /><br /><br /><br />  burada görülen “op” eğer “1” değerine sahipse “arp request” oluşturmak anlamına gelir eğer bunun değeri “2” olursa “arp response” oluşturmak anlamına gelir. Bizim için arp response(cevap) olması lazım o yüzden bunun değerini 2 yapmalıyız. Bunu da şu şekilde kod yazarak yaparız;<br /><br /> <span style="color:#808080;">arp_response = scapy.ARP(op=2,</span>.... gibi<br /><br /> aşağıda bir kod örneği bulunmaktadır<br /><br /> arp_response = scapy.ARP(<span style="color:#aa4926;">op</span>=<span style="color:#6897bb;">2</span><span style="color:#cc7832;">,</span><span style="color:#aa4926;">pdst</span>=<span style="color:#6a8759;">&quot;10.0.2.15&quot;</span><span style="color:#cc7832;">,</span><span style="color:#aa4926;">hwdst</span>=<span style="color:#6a8759;">&quot;08:00:27:e6:e5:59&quot;</span><span style="color:#cc7832;">,</span><span style="color:#aa4926;">psrc</span>=<span style="color:#6a8759;">&quot;10.0.2.1&quot;</span>)<br /> scapy.send(arp_response)<br /> <br /><strong><span style="color:#e01b24;"> mitmf atağı başlatma</span></strong> <strong><span style="color:#e01b24;">(manual olarak arpspoof)</span></strong><br /> <br /> <br /> <br /><br />  Bu kodlarla <a href="CyberSecurity--Attacks--ArpSpoof.html#ARP">arp_posion</a> yaptık. Bu arp_poison işlemi ile hedef ip olan “10.0.2.15” adresi artık modemin mac adresini bizim makinemiz olarak görüyor.<br /><br />  Aşağıda ki resimde de bunu değişikliği görebiliriz.<br /><br /><img src="images/23-6.png" alt="images/23-6.png" /><br /><br /><br />  Böylelikle modemin ip&#39;si olan “10.0.2.1” in mac adresini kendi mac adresimiz ile değiştirdik. <br />  <br />  Hatta üçüncü satırda olan “10.0.2.4” ip adresi bize ait ve modem ile aynı mac adresine sahip olduğunu görebiliyoruz;<br />  <br />  <br /><img src="images/23-7.png" alt="images/23-7.png" /><br /><br />Windows makinesi modemi bizim verdiğimiz mac adresinde sanıyor, böylelikle arp saldırısı başarıya ulaştı.<br /><br /></div>
</body>
</html>
